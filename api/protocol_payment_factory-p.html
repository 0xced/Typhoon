<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Typhoon: &lt;PaymentFactory&gt; Protocol Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" >
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="typhoon-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('protocol_payment_factory-p.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">&lt;PaymentFactory&gt; Protocol Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a factory that combines the convenience method arguments with the assembly-supplied dependencies to construct objects.  
 <a href="protocol_payment_factory-p.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides a factory that combines the convenience method arguments with the assembly-supplied dependencies to construct objects. </p>
<p>*definition) { [definition injectProperty:(creditService)]; [definition injectProperty:(authService)]; } factories:^(<a class="el" href="interface_typhoon_assisted_factory_definition.html">TyphoonAssistedFactoryDefinition</a> *definition) { [definition factoryMethod:(paymentWithStartDate:amount:) returns:[Payment class] initialization:^(<a class="el" href="interface_typhoon_assisted_factory_method_initializer.html" title="Describes how a factory method will use an init method, by mapping the factory method arguments and f...">TyphoonAssistedFactoryMethodInitializer</a> *initializer) { [initializer setSelector:(initWithCreditService:authService:startDate:amount:)]; [initializer injectWithProperty:(creditService)]; [initializer injectWithProperty:(authService)]; [initializer injectWithArgumentNamed:"startDate"];
           [initializer injectWithArgumentNamed:@"amount"]; }]; }]; }</p>
<p>*definition) { [definition injectProperty:(creditService)]; [definition injectProperty:(authService)]; } factory^id (id&lt;PaymentFactory&gt; factory, NSDate *startDate, NSUInteger amount) { return [[Payment alloc] initWithCreditService:factory.creditService authService:factory.authService startDate:startDate amount:amount]; }]; }</p>
<p>*definition) { [definition injectProperty:(creditService)]; [definition injectProperty:(authService)]; } factories:^(<a class="el" href="interface_typhoon_assisted_factory_definition.html">TyphoonAssistedFactoryDefinition</a> *definition) { [definition factoryMethod:(paymentWithStartDate:amount:) body:^id (id&lt;PaymentFactory&gt; factory, NSDate *startDate, NSUInteger amount) { return [[Payment alloc] initWithCreditService:factory.creditService authService:factory.authService startDate:startDate amount:amount]; }]; }]; }</p>
<p>*definition) { [definition injectProperty:(creditService)]; [definition injectProperty:(authService)]; } returns:[Payment class]]; }</p>
<p>To create a factory you must define a protocol for the factory, wire its dependencies (defined as readonly properties), and, sometimes, provide implementation blocks or initializer descriptions for the body of the class methods. Most of the simplest cases should be covered with no glue code, and the rest of them, with a couple of lines.</p>
<h1>Example</h1>
<p>Imagine you have defined this Payment class with two dependencies that should be injected, and two parameters that must be provided at runtime.</p>
<pre class="fragment">- (instancetype)initWithCreditService:(id&lt;CreditService&gt;)creditService
                          authService:(id&lt;AuthService&gt;)authService
                            startDate:(NSDate *)date
                                amout:(NSUInteger)amount;

@end
</pre><p>You also define a protocol for the factory of the Payment objects. The factory must declare the dependencies as readonly properties, and the factory methods should be the only ones existing.</p>
<p>The factory provider will create a new class during runtime to implement the protocol, and create the implementation of the protocol method looking for a good init method in the return type.</p>
<p>In the dependencies block you can use any <code>injectProperty:</code> method that you will use for your normal definitions. It is a standard TyphoonDefinitionBlock that get passed directly to the <a class="el" href="interface_typhoon_definition.html">TyphoonDefinition</a> constructor used internally.</p>
<p>Sometimes you might need to customize which init method gets used in the factory method, since the heuristic might not work for your classes, or you cannot modify the return type method names. In those cases, you can always provide your own implementation, and make the call to the init method yourself: </p>
<pre class="fragment">- (id)paymentFactory {
  return [TyphoonFactoryProvider withProtocol:</pre><p>For the factories block you must provide one body block for each class method of your factory protocol. The block used as the body receives the factory itself as the first argument, so you can use the factory properties, and then the rest of the class method arguments in the second and following positions.</p>
<p>You can use <code>withProtocol:dependencies:factories:</code> method also when your protocol has several factory methods, providing one body for each of them.</p>
<p>In the case of the protocol having only one factory method you can use a shorter version of the method. For example the equivalent shorter version for the above definition will be the following one: </p>
<pre class="fragment">- (id)paymentFactory {
  return [TyphoonFactoryProvider withProtocol:</pre><p>There is an alternative way to define the factory methods, but since it involves writting a lot more code than the blocks used above, it is not recommended. For the example above the code will be the following: </p>
<pre class="fragment">- (id)paymentFactory {
  return [TyphoonFactoryProvider withProtocol:</pre><p>You can also use <code>injectWithArgumentAtIndex:</code> if you prefer to refer to the factory method argument position.</p>
<p>Know limitation: You can only create one factory for a given protocol. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="protocol_payment_factory-p.html">PaymentFactory</a></li>
    <li class="footer">Generated on Fri Dec 6 2013 22:02:08 for Typhoon by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
